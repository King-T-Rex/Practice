// main.c
// Главный файл программы

/*
Автор: Кузнецов Александр

Программа находит наибольший элемент в заштрихованной области матрицы.
В программе реализовано:
    - Ввод размерности матрицы
    - Ввод элементов матрицы
    - Поиск максимального элемента в заштрихованной области
    - Проверка условий попадания элемента в область:
        1. Выше главной диагонали: j >= i
        2. Ниже побочной диагонали: i + j >= n - 1

*/


#include <stdio.h>
#include <locale.h>
#include <windows.h>    // Для SetConsoleCP — настройка кодировки консоли в Windows
#include "matrix.h"

int main() {

    // Настраивает локаль для корректного отображения русского текста
    setlocale(LC_ALL, ".UTF-8");     // Устанавливает локаль для всей программы
    SetConsoleCP(CP_UTF8);           // Устанавливает кодировку ввода консоли в UTF-8
    SetConsoleOutputCP(CP_UTF8);     // Устанавливает кодировку вывода консоли в UTF-8

    int n;                           // Переменная для хранения размерности матрицы

    // Пользователь вводит размерность матрицы (ограничение n ≤ 20, так как массив статический)
    printf("Введите размерность квадратной матрицы n (1..%d):", MAX_N);
    if (scanf("%d", &n) != 1 || n < 1 || n > MAX_N) {
        // Если пользователь ввёл что-то неправильное, программа завершается
        printf("Ошибка: неверное значение n. Программа завершает работу.\n");
        return 1;
    }

    // Объявляет статический двумерный массив для матрицы

    // Использоваться будет только часть n×n.
    double matrix[MAX_N][MAX_N];

    // Ввод элементов матрицы
    input_matrix(n, matrix);

    // Печать полной матрицы для наглядности
    print_matrix(n, matrix);

    // Печать только заштрихованной области (элементы вне её заменяются на "--")
    print_zone(n, matrix);

    // Поиск максимального значения в заштрихованной области
    double max_value = find_max_in_zone(n, matrix);

    // Вывод результата пользователю
    printf("\nНаибольший элемент в заштрихованной области: %.2f\n", max_value);

    return 0; // Завершение программы без ошибок
}
